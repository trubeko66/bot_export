# Автоматизация авторизации в Docker

## Быстрый старт

### 1. Настройка
```bash
# Скопируйте шаблон настроек
copy .env.template .env

# Заполните в .env:
BOT_TOKEN=ваш_токен_бота
API_ID=ваш_api_id
API_HASH=ваш_api_hash
PHONE_NUMBER=+79123456789
CLOUD_PASSWORD=ваш_пароль_2fa  # если включена 2FA
```

### 2. Авторизация

**Windows:**
```cmd
docker-auth.bat
```

**Linux/macOS:**
```bash
chmod +x docker-auth.sh
./docker-auth.sh
```

**Ручная авторизация:**
```bash
# 1. Запустите контейнер
docker-compose up -d

# 2. Получите код из Telegram и выполните:
docker-compose exec telegram-bot bash -c "export TELEGRAM_CODE=ваш_код && python auto_auth.py"
```

### 3. Запуск бота
```bash
docker-compose up -d
```

## Тестирование
```bash
# Проверка системы
python test_auth.py

# Тест авторизации
python auto_auth.py
```

## Управление Docker
```bash
# Статус
docker-compose ps

# Логи
docker-compose logs -f

# Остановка
docker-compose down

# Перезапуск
docker-compose restart
```

## Решение проблем

### "Номер телефона не указан"
Проверьте `PHONE_NUMBER` в .env (формат: +79123456789)

### "Код подтверждения не найден"
1. Получите код из Telegram
2. Установите: `export TELEGRAM_CODE=код`
3. Запустите авторизацию повторно

### "Облачный пароль не указан"
Если включена 2FA, укажите `CLOUD_PASSWORD` в .env

## Файлы
- `auth_helper.py` - автоматическая авторизация
- `auto_auth.py` - тестовая авторизация  
- `docker-auth.sh/bat` - скрипты настройки
- `test_auth.py` - тестирование системы
- `DOCKER_AUTH_GUIDE.md` - подробная документация